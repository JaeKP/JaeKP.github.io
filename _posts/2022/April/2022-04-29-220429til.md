---
title: 22/04/29/금 스터디 프로젝트 중간 발표
author: 박재경
date: 2022-04-29
categories: [TIL/2022, April]
tag: [til, javascript, algorithm]
---

# 220429 Today I learned!

- [x] 스터디 프로젝트 
- [x] 스터디 프로젝트 발표
- [x] 백준 문제 풀이 

---

## 1. Fact 

### (1) 스터디 프로젝트

- 로컬스토리지를 연동했다.
  - 처음에는 컴포넌트에서 로컬 스토리지를 저장했는데, 그러면 다른 컴포넌트에 전달하기 어렵다는 사실을 알게 되었다.
  - 그래서 로컬스토리지를 저장하는 것을 App.js로 이동시켰다. 

- 데이터를 저장하는 로직을 대폭 수정했다.
  - 이전에는 모든 항목별 리스트에 저장했다면 객체를 활용하여 통합했다. 

- 컴포넌트 구조를 변경했다. 
  - 이전: App.js <= Button. js <= Modal.js  <= Card.js
  - 현재: App.js <= Button.js , Card.js <= Modal.js





### (2) 백준 문제 풀이

- 24955 숫자 이어 붙이기

- [문제풀이](https://github.com/JaeKP/Study/tree/master/algorithm/1%EC%9D%BC1%EC%95%8C%EA%B3%A0/04%EC%9B%94/0429)
- DFS

<br>

## 2. Feeling

검색형 개발자가 되어가고 있다.. 그래도 내가 처음에 기획했던 것의 대부분의 기능은 구현했다!

<img src="https://raw.githubusercontent.com/JaeKP/image_repo/main/img/%EC%99%80%EC%9D%B4%EC%96%B4%ED%94%84%EB%A0%88%EC%9E%84.png" alt="와이어프레임" style="zoom:40%;" />

현재 2번과 3번의 데이터수정을 아직 구현하지는 못했지만, 다음 주에 구현하면 목표대로 프로젝트가 끝날 수 있을 것 같다. 처음에 프로젝트 시작할 때는 정말 리액트에 대해 하나도 모르는 것 같아서 막막했지만 하면 된다는 걸 느끼고 있다. 확실히 혼자 삽질하면서 배우는 게 많은 것 같다 😉

<br>

## 3. Finding 

> **리액트에서 LocalStorage CRUD**
{: .prompt-info }

**CREATE**

- 특정 데이터를 Json파일로 변환해서 문자열 형태로 저장한다.
- `useEffect`를 활용하여 데이터가 바뀔 때 자동으로 저장한다. 

```react
// modal.js

useEffect(() => {
  localStorage.setItem("countInLocal", JSON.stringify(count));
}, [count]);

useEffect(() => {
  localStorage.setItem("dateInLocal", JSON.stringify(dateList));
}, [dateList]);

useEffect(() => {
  localStorage.setItem("timeInLocal", JSON.stringify(timeList));
}, [timeList]);

useEffect(() => {
  localStorage.setItem("caloriesInLocal", JSON.stringify(caloriesList));
}, [caloriesList]);

```

<br>

**READ**

- JSON으로 저장된 파일 파싱해서 가져온다. 

```react
// modal.js

const [count, setCount] = useState(
  () => JSON.parse(localStorage.getItem("countInLocal")) || [0]
);
const [dateList, setdateList] = useState(
  () => JSON.parse(localStorage.getItem("dateInLocal")) || [""]
);
const [timeList, settimeList] = useState(
  () => JSON.parse(localStorage.getItem("timeInLocal")) || [""]
);
const [caloriesList, setcaloriesList] = useState(
  () => JSON.parse(localStorage.getItem("caloriesInLocal")) || [""]
);
```



**Delete**

- 처음에는 데이터를 항복별 리스트로 저장을 해서  삭제하는 기능을 만들기 어려웠다. 
- 그래서 인덱스가 0인경우 보이지 않는 것을 이용해 인덱스를 0으로 수정해주었다. 

```react
// modal.js => Card.js에게 props로 전달한다. 

const deleteCard = (num) => {
const countList = [...count];
    countList[num] = 0;
    setCount(countList);
};
```

```react
// Card.js

import PropTypes from "prop-types";
import styled from "styled-components";

function Card({ count, date, time, calories, deleteCard }) {
  return (
    <div>
      <StyledDiv>
        {/* count리스트를 순회하는데 해당 값이 0이면 카드 컴포넌트를 생성하지 않는다. */}
        <StyledCardContainer>
          {count.map((i) =>
            i === 0 ? null : (
            <StyledCard key={i}>
              <StyledP1>{date[i]} </StyledP1>
              <StyledDeleteButton onClick={() => deleteCard(i)}>
                ✖
              </StyledDeleteButton>
              <StyledP2>{calories[i]} kcal</StyledP2>
              <StyledP3>{time[i]} </StyledP3>            
            </StyledCard>)
          )}
        </StyledCardContainer>
      </StyledDiv>
    </div>
  );
}
```



그런데, 과연 이런 로직이 과연 맞는가에대한 의문이 들었다. 데이터가 삭제되지 않고 단지 index가 0이 되기때문에 카드 컴포넌트로 생성되지 않는 것일 뿐 데이터는 남아있기 때문이다.  



![image-20220430172702707](https://raw.githubusercontent.com/JaeKP/image_repo/main/img/image-20220430172702707.png)![image-20220430185458594](https://raw.githubusercontent.com/JaeKP/image_repo/main/img/image-20220430185458594.png)



우선 데이터가 저렇게 따로 저장되고 있다는 것 자체가 별로인 것 같았다. 객체 형식으로 id, date, calories, time 에 저장을 하는 것이 맞는 것 같아서 대폭 수정했다. 수정하고자하는 것은 다음과 같았다. 

1. Card를 Modal의 자식에서 벗어나게 하자. 현재 Modal에서 데이터를 저장하고 기록하고 이를 props로 전달해주고있는데 이 구조자체를 개편하고자 했다.
2. LocalStorage에 객체 스타일로 저장한다. 

그래서 다음과 같이 수정했다. 



```react
// App.js

import { useEffect, useState } from "react";
import Button from "./component/Button";
import Card from "./component/Card";

function App() {
  const [data, setData] = useState(
    () => JSON.parse(localStorage.getItem("data")) || [""]
  );

  useEffect(() => {
    localStorage.setItem("data", JSON.stringify(data));
  }, [data]);

  return (
    <div>
      <Button data={data} setData={setData} />
      <Card data={data} setData={setData} />
    </div>
  );
}

export default App;
```

- App.js에서 LocalStorage를 관리한다. 그리고 해당 데이터들을 Button과 Card 컴포넌트에게 전달한다.
- Button컴포넌트에서 Modal컴포넌트로 다시 전달한다. 



```react
// Modal.js

// Create
const formSubmit = (event) => {
  hide();
  event.preventDefault();

  const newData = { id: index, date: date, time: time, calories: calories };
  const realData = [...data];
  realData.push(newData);
  setData(realData);
  changeIndex();

  setDate("");
  setTime("");
  setCalories("");
};
```

- Modal에서 데이터를 객체의 리스트로 저장한다. 
  - ["", {id:1 , date:2022-04-28, time: 20분, caloreis: 120}, {id:2, date:2022-04-29, time:30분 calories: 150}]



```react
// Card.js

// DELETE 
const deleteData = (num) => {
  const newData = data.filter((d) => d.id !== num);
  setData(newData);
};
```

- 카드 컴포넌트에서는 전달받은 데이터들을 Read하여 카드 컴포넌트를 생성한다.
- 삭제는 위의 방식처럼 삭제버튼을 누른 컴포넌트의 id를 인식하여 해당 id만 필터링한 리스트를 새로 생성하고 이를 데이터에 반영한다. 



그 결과, 이전보다 깔끔하게? 데이터를 저장할 수 있게 된 것 같다.

<img src="https://raw.githubusercontent.com/JaeKP/image_repo/main/img/image-20220430191111305.png" alt="image-20220430191111305" style="zoom: 67%;" />

<br>

<br>

## 4. Future Action & Feedback

| Future Action                              | 진행 상황       | Feedback                                                     |
| ------------------------------------------ | --------------- | ------------------------------------------------------------ |
| DOM을 깨우치다                             | `pause 🤦‍♀️`      | 잠시 중단!                                                   |
| 강의에서 학습한 flex-website 혼자 제작하기 | `in progress 🚀` | 현재 Section2까지 진행한 상태이다.<br />오는 주에 Section3를 할 예정이다. |
| 1일 1알고! 🔥                               | `in progress 🚀` |                                                              |

<br>
