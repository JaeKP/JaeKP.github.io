---
title: 04-TpyeScript-고급-타입 
author: 박재경
date: 2022-07-16
categories: [WEB, TypeScript]
tag: [TypeScript]
---

[강의링크](https://www.udemy.com/course/best-typescript-21/learn/lecture/27937464)

## 섹션6. 고급 타입



### 1) 

#### (1) intersection

>  다른 타입을 결합할 수 있는 타입

<br>

```typescript
interface Admin {
  name: string;
  privileges: string[];
};

type Employee = {
  name: string;
  startDate: Date;
}


// 두 타입의 결합된 하나의 타입
type ElevatedEmployee = Admin & Employee

const e1: ElevatedEmployee = {
  name: "Coco",
  privileges: ["create-server"],
  startDate: new Date()
}

type Combinnable = string | number;
type Numeric = number | boolean;

// 타입스크립트는 Universal을 숫자형 타입으로 간주한다. 
// Combinnable과 Numeric이 겹치는 타입은 숫자형 타입뿐이기 때문이다. 
type Universal = Combinnable & Numeric
```

<br>

### 2) 타입가드 

> 타입가드는 특정 속성이나 메소드를 사용하기 전에 그것이 존재하는지 확인하거나 타입을 사용하기 전에 이 타입으로 어떤 작업을 수행할 수 있는지를
>
> 확인하는 개념 또는 방식을 나타내는 용어이다.

#### (1) typeof

이는 유니온 타입이 지닌 유연성을 활용할 수 있게 해주며 런타임 시 코드가 정확하게 작동하게 해주며, 객체가 아닌 타입들의 경우 일반적으로 `typeof`를 사용하여 타입가드를 구현한다. 

<br>

```typescript
type Combinable = string | number;

function add(a: Combinable, b: Combinable) {
  // typeof를 활용한 타입가드: 맞는 타입인지 확인한다.
  if (typeof a === 'string' || typeof b === 'string') {
    return a.toString() + b.toString();
  }
  return a + b;
}
```

위의 코드에서 if절이 없다면, 원하는 결과가 나오지 않을 수 있다. if절이 유니온 타입의 세부 분기를 지정해주어 원하는 결과를 도출하도록 만든다. 

<br>

#### (2) in

객체에서 타입가드를 구현하기 위해 사용된다. 

<br>

```typescript
type Admin = {
  name: string;
  privileges: string[];
};

type Employee = {
  name: string;
  startDate: Date;
};

type UnknownEmployee = Employee | Admin;


function printEmployeeInformation(emp: UnknownEmployee) {
  // in을 활용한 타입가드: 해당 객체안에 privileges 속성이 있는지 확인한다. 
  if ('privileges' in emp) {
    console.log('Privileges: ' + emp.privileges);
  };
  if ('startDate' in emp) {
    console.log('Start Date: ' + emp.startDate);
  };
};

printEmployeeInformation({ name: 'Manu', startDate: new Date() });

```

`in`연산자를 활용하여 객체 안에 속성이 있는지 없는지 확인하여 함수의 분기를 나눌 수 있다. 

<br>

#### (3) instanceof

객체의 타입가드를 구현하는 또 다른 방법 중 하나이다. 

<br>

```typescript
class Car {
  drive() {
    console.log('Driving...');
  }
}

class Truck {
  drive() {
    console.log('Driving a truck...');
  }

  loadCargo(amount: number) {
    console.log('Loading cargo ...' + amount);
  }
}

type Vehicle = Car | Truck;

const v1 = new Car();
const v2 = new Truck();

function useVehicle(vehicle: Vehicle) {
  vehicle.drive();
  // instanceof를 활용한 타입 가드: Truck 객체를 참조하고 있는지 확인한다. 
  if (vehicle instanceof Truck) {
    vehicle.loadCargo(1000);
  }
```

객체의 경우 instanceof나 in을 사용하여 수행할 수 있고 다른 타입들의 경우 typeof를 사용할 수 있다.

<br>